# SMS邮件转发应用设计方案

## 📋 功能特性
- ✅ 实时SMS监听和转发
- ✅ 多邮件服务商支持 (Gmail, Outlook, QQ邮箱等)
- ✅ 智能转发规则过滤
- ✅ 转发历史记录和统计
- ✅ 现代化Material 3 UI设计
- ✅ 暗色/亮色主题支持
- ✅ 双卡设备支持和SIM卡信息管理 (v1.0.6)
- ✅ 设备兼容性检测和评分系统 (v1.0.6)
- ✅ 定期健康检测和心跳监控 (v1.0.6)
- ✅ 高级邮箱配置管理 (v1.0.6)

## 🎨 界面设计

### 1. 主界面 (Dashboard)
```
┌─────────────────────────────────────┐
│  📱 SMS Email Forwarder            │
├─────────────────────────────────────┤
│  🟢 转发服务已启用                    │
│  📊 今日转发: 8条                    │
│  📧 成功率: 98.5%                   │
├─────────────────────────────────────┤
│  📄 最近转发记录                     │
│  ┌─────────────────────────────────┐│
│  │ 📱 +86138****1234              ││
│  │ 💬 验证码: 123456               ││
│  │ ⏰ 2分钟前 ✅ 已转发            ││
│  └─────────────────────────────────┘│
│  ┌─────────────────────────────────┐│
│  │ 📱 +86139****5678              ││
│  │ 💬 银行通知: 消费299元           ││
│  │ ⏰ 5分钟前 ✅ 已转发            ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  ⚙️ 设置  📊 统计  📝 日志          │
└─────────────────────────────────────┘
```

### 2. 设置界面 (Settings)
```
┌─────────────────────────────────────┐
│  ⚙️ 设置                           │
├─────────────────────────────────────┤
│  📧 邮件配置                        │
│  ├ SMTP服务器: smtp.gmail.com      │
│  ├ 发送邮箱: user@gmail.com        │
│  ├ 接收邮箱: target@email.com      │
│  └ 📝 测试连接                     │
├─────────────────────────────────────┤
│  🔄 转发规则                        │
│  ├ ✅ 验证码短信                   │
│  ├ ✅ 银行通知                     │
│  ├ ❌ 垃圾短信                     │
│  └ 📝 自定义关键词                 │
├─────────────────────────────────────┤
│  🔔 通知设置                        │
│  ├ ✅ 转发成功通知                 │
│  ├ ✅ 转发失败通知                 │
│  └ ✅ 声音提醒                     │
├─────────────────────────────────────┤
│  🎨 外观设置                        │
│  ├ 🌙 暗色主题                     │
│  └ 🎨 主题色彩                     │
└─────────────────────────────────────┘
```

### 3. 统计界面 (Statistics)
```
┌─────────────────────────────────────┐
│  📊 转发统计                        │
├─────────────────────────────────────┤
│  📈 本周统计                        │
│  ┌─────────────────────────────────┐│
│  │    转发量                       ││
│  │ 25 ┤                           ││
│  │ 20 ┤  ██                       ││
│  │ 15 ┤  ██  █                    ││
│  │ 10 ┤  ██  █   █                ││
│  │  5 ┤  ██  █   █  █             ││
│  │  0 └──┴───┴───┴──┴─────────────││
│  │    一  二  三  四  五  六  日    ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  📋 详细数据                        │
│  ├ 总转发次数: 156次               │
│  ├ 成功率: 98.7%                  │
│  ├ 平均延迟: 1.2秒                │
│  └ 最近故障: 无                   │
└─────────────────────────────────────┘
```

## 🔧 技术实现要点

### 权限需求
- `android.permission.RECEIVE_SMS` - 接收短信
- `android.permission.READ_SMS` - 读取短信内容
- `android.permission.INTERNET` - 网络访问
- `android.permission.POST_NOTIFICATIONS` - 通知权限

### 核心依赖
- Jetpack Compose - 现代UI框架
- Room Database - 本地数据存储
- Retrofit - 网络请求
- WorkManager - 后台任务管理
- Hilt - 依赖注入
- JavaMail API - 邮件发送

### 安全考虑
- 邮箱密码加密存储
- 应用锁保护
- 短信内容脱敏显示
- 网络传输加密

## 📁 项目结构
```
app/src/main/java/com/example/smsforwarder/
├── ui/
│   ├── dashboard/          # 主界面
│   ├── settings/           # 设置界面
│   ├── statistics/         # 统计界面
│   ├── logs/              # 日志界面
│   └── components/        # 通用组件
├── data/
│   ├── database/          # Room数据库
│   ├── repository/        # 数据仓库
│   └── preferences/       # SharedPreferences
├── domain/
│   ├── model/             # 数据模型
│   ├── usecase/           # 业务逻辑
│   └── repository/        # 仓库接口
├── service/
│   ├── SmsReceiver.kt     # 短信接收器
│   ├── EmailService.kt    # 邮件服务
│   └── ForwardService.kt  # 转发服务
└── utils/
    ├── PermissionHelper.kt # 权限工具
    ├── EmailHelper.kt     # 邮件工具
    └── Extensions.kt      # 扩展函数
```

## 🎯 开发优先级
1. **第一阶段**: 基础SMS接收和邮件发送功能
2. **第二阶段**: UI界面和用户配置
3. **第三阶段**: 转发规则和过滤功能
4. **第四阶段**: 统计分析和日志管理
5. **第五阶段**: 性能优化和安全加固 