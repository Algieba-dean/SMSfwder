# Changelog

## [1.1.0] - 2025-01-25

### 🚀 重大更新
- **中文转发模板**: 完全本地化的邮件转发模板，包含详细的SIM卡信息
- **智能SIM卡识别**: 自动检测短信来源SIM卡，显示卡槽、运营商、手机号等信息
- **构建系统优化**: 修复GitHub Actions构建问题，提升编译稳定性

### ✨ 功能增强
- **转发邮件优化**:
  - 中文界面和标签
  - 详细SIM卡信息显示（卡槽、运营商、卡号、状态）
  - 中文时间格式（yyyy年MM月dd日 HH:mm:ss）
  - 设备信息展示（Android版本、设备型号、双卡状态）
  - 美化的消息内容框架

### 🔧 技术改进
- **版本兼容性**: 调整Kotlin和KSP版本，确保构建稳定性
- **CI/CD优化**: GitHub Actions配置优化，解决镜像源依赖问题
- **代码质量**: 修复编译警告，提升代码健壮性

### 📱 用户体验
- **邮件主题格式**: 【卡1(138****1234)】来自 10086 的短信
- **完整信息展示**: 接收时间、转发时间、消息长度、设备状态
- **更好的可读性**: 使用树形结构和分隔线美化信息布局

---

## [1.0.6] - 2025-01-25

### 🆕 新增功能
- **双卡设备支持**: 完整的双SIM卡识别和管理功能
  - 自动检测单卡/双卡设备状态
  - 转发邮件包含SIM卡槽信息 (SIM1/SIM2/未知)
  - 运营商信息识别和显示
  - SIM卡状态实时监控
- **设备兼容性检测系统**: 智能评估设备SMS转发兼容性
  - 0-100分兼容性评分系统
  - 设备信息详细报告 (制造商、型号、Android版本)
  - SMS功能支持检测
  - 后台运行能力评估
  - 厂商ROM兼容性分析
- **定期健康检测机制**: 自动化系统监控和告警
  - 可配置的心跳检测间隔 (1小时-24小时)
  - 权限状态实时监控
  - 网络连通性测试
  - 邮箱配置有效性验证
  - 异常情况邮件告警
- **高级邮箱配置管理**: 企业级配置管理功能
  - 批量邮箱配置导入/导出 (JSON格式)
  - 一键清理所有配置
  - 配置完整性验证
  - 智能配置修复建议
- **增强设置界面**: 全新功能模块集成
  - SIM卡信息卡片：实时状态、运营商、信号强度
  - 兼容性检测卡片：一键检测、详细报告、强制刷新
  - 心跳监控配置：开关控制、间隔设置、邮件通知

### 🔧 改进 (Changed)
- **转发记录数据模型扩展**: 添加SIM卡槽和运营商字段
- **数据库版本升级**: V4→V5，包含完整迁移脚本
- **SMS接收器增强**: 集成SIM卡信息提取
- **邮件内容格式优化**: 包含详细的设备和SIM卡信息
- **WorkManager集成**: 定期任务调度和执行
- **依赖注入架构完善**: 新增SimCardManager、CompatibilityChecker等组件

### 🐛 修复 (Fixed)
- **后台转发测试功能**: 修复了"测试后台转发"按钮只显示模拟结果而不实际发送邮件的问题
  - 现在点击测试按钮会真正发送一封测试邮件到配置的邮箱
  - 测试邮件包含详细的转发信息和时间戳
  - 修复了编译错误：正确使用EmailResult的message属性而不是errorMessage
- **UI兼容性**: 修复Icons.Default.Send的弃用警告，使用Icons.AutoMirrored.Filled.Send

### 🔧 技术改进 (Technical)
- 在BackgroundOptimizationViewModel中添加EmailRepository依赖注入
- 改进测试邮件内容格式，包含更多调试信息
- 增强错误处理和日志记录
- 创建了900+行高质量Compose UI代码
- 完善MVVM+Hilt+Room架构集成

### 📚 文档 (Documentation)
- 更新README.md，添加所有新功能说明
- 完善CHANGELOG.md版本历史记录
- 新增组件文档和使用说明

## [v1.0.0] - 2024-01-15

### 🎉 新增 (Added)
- 初始版本发布
- 完整的SMS短信转发功能
- 邮箱配置和测试
- 现代化Material Design 3界面
- 转发日志和统计
- GitHub Actions自动构建和发布

### 🛡️ 安全 (Security)
- 本地数据存储，不上传任何敏感信息
- 邮箱配置安全存储

---

### 版本说明

- **🎉 新增 (Added)**: 新功能
- **🔧 改进 (Changed)**: 现有功能的变更
- **🗑️ 弃用 (Deprecated)**: 即将移除的功能
- **🚫 移除 (Removed)**: 已移除的功能
- **🐛 修复 (Fixed)**: Bug修复
- **🛡️ 安全 (Security)**: 安全性修复和改进 